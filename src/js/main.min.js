jQuery(document).ready(function(a){var n=!1,t=a("p#processing"),i=a("p#complete"),c=a("p#clean");function s(e="",n="notice-success"){a("#wpcontent").prepend('<div style="z-index: 9999; position: fixed; width: 82%" class="notice '+n+' is-dismissible single-cached"><p>'+e+'</p><button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>'),setTimeout(function(){a(".notice-dismiss").parent().fadeOut("slow",function(){a(this).remove()})},5e3),a(".notice-dismiss").click(function(e){a(this).parent().remove()})}function o(){a.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"cugz_callback",nonce:cugz_ajax_var.nonce,do:"check_status"},success:function(e){a(".cache-status").hide(),("preloaded"!==e||n?"empty"!==e||n?t:c:i).show()}})}cugz_ajax_var.is_settings_page&&(a("#datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:function(e){a(this).attr("value",e)}}),o(),setInterval(function(){o()},5e3)),a("#empty,#regen").click(function(e){e.preventDefault();e=a(this).attr("id");a(".cache-status").hide(),t.show(),!1===n?(n=!0,"regen"===e&&s("Cache is preloading. You may exit this page."),a.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"cugz_callback",nonce:cugz_ajax_var.nonce,do:e},success:function(e){n=!1,o()},error:function(){location.href="/wp-admin/"+cugz_ajax_var.options_page_url}})):s("Please wait for the current process to finish.","notice-warning")}),a(".cache-using-gzip-single-page").click(function(e){e.preventDefault(),$spinner=a('<span class="spinner is-active"></span>'),a(this).after($spinner),a.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"cugz_callback",nonce:cugz_ajax_var.nonce,do:"single",post_id:a(this).data("post-id")},success:function(e){s("Cached!"),$spinner.fadeOut("slow",function(){a(this).remove()})}})})});
