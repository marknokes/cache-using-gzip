jQuery(document).ready(function(t){var n=!1,a=t("p#processing"),i=t("p#complete"),c=t("p#clean");function s(e="",n="notice-success"){t("#wpcontent").prepend('<div style="z-index: 9999; position: fixed; width: 82%" class="notice '+n+' is-dismissible single-cached"><p>'+e+'</p><button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>'),setTimeout(function(){t(".notice-dismiss").parent().fadeOut("slow",function(){t(this).remove()})},5e3),t(".notice-dismiss").click(function(e){t(this).parent().remove()})}function o(){t.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"cugz_callback",nonce:ajax_var.nonce,do:"check_status"},success:function(e){t(".cache-status").hide(),("preloaded"!==e||n?"empty"!==e||n?a:c:i).show()}})}ajax_var.is_settings_page&&(t("#datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:function(e){t(this).attr("value",e)}}),o(),setInterval(function(){o()},5e3)),t("#empty,#regen").click(function(e){e.preventDefault();e=t(this).attr("id");t(".cache-status").hide(),a.show(),!1===n?(n=!0,"regen"===e&&s("Cache is preloading. You may exit this page."),t.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"cugz_callback",nonce:ajax_var.nonce,do:e},success:function(e){n=!1,o()},error:function(){location.href="/wp-admin/options-general.php?page=cugz_gzip_cache"}})):s("Please wait for the current process to finish.","notice-warning")}),t(".cache-using-gzip-single-page").click(function(e){e.preventDefault(),$spinner=t('<span class="spinner is-active"></span>'),t(this).after($spinner),t.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"cugz_callback",nonce:ajax_var.nonce,do:"single",post_id:t(this).data("post-id")},success:function(e){s("Cached!"),$spinner.fadeOut("slow",function(){t(this).remove()})}})})});
